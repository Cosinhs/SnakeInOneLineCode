<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake</title>
<canvas id="canvas" width="400" height="400"></canvas>
</head>
<body>
<script>
//https://www.zhihu.com/question/38557752/answer/110013071
window.onkeydown=((ctx,snake,food,direction,move,draw,point=-1)=>((loop,newFood,timer=setInterval(()=>loop(newFood)||clearInterval(timer)||alert(`Game Over! Your point: ${point}`),160))=>Array.from({length:400}).forEach((_,i)=>draw(ctx,i,"black"))||(e=>direction=snake[1]-snake[0]==(move=[-1,-20,1,20][(e||event).keyCode-37]||direction)?direction:move))((newFood)=>snake.unshift(move=snake[0]+direction)&&snake.indexOf(move,1)>0||move<0||move>399||direction==1&&move%20==0||direction==-1&&move%20==19?false:draw(ctx,snake[0],"blue")||draw(ctx,snake[1],"green")||(move==food?newFood()&draw(ctx,food,"red")&(point+=1):draw(ctx,snake.pop(),"black"))||true,()=>(food=Array.from({length:400},(v,k)=>k).filter(i=>snake.indexOf(i)<0)[~~(Math.random()*(400-snake.length))])))(document.getElementById('canvas').getContext('2d'),[42,41],43,1,null,(ctx,node,color)=>(ctx.fillStyle=color)&ctx.fillRect(node%20*20+1,~~(node/20)*20+1,18,18));
</script>
</body>
</html>
